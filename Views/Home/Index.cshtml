@using Microsoft.AspNetCore.Identity
@inject SignInManager<Web_chơi_cờ_Caro.Data.ApplicationUser> SignInManager

@{
    ViewData["Title"] = "Home Page";
}

@if (SignInManager.IsSignedIn(User))
{
    @section CaroBoard {
        <div class="caro-board">
            <table id="caro-board" class="caro-table" style="background: #fffbe6; border-radius: 8px; overflow: hidden;">
                @for (int i = 0; i < 20; i++)
                {
                    <tr>
                        @for (int j = 0; j < 20; j++)
                        {
                            <td></td>
                        }
                    </tr>
                }
            </table>
        </div>
    }
    @section PlayerInfo {
        <div class="d-flex flex-column gap-4">
            <!-- Player Info -->
            <div class="text-center player-info">
                <img src="https://img.icons8.com/ios-filled/50/000000/user.png" alt="avatar" style="width:60px;height:60px; margin-bottom:10px;" />
                <h5>@User.Identity?.Name</h5>
                <div>Lượt đi: <span class="badge bg-warning text-dark">X</span></div>
                <div class="mt-3">Trạng thái: <span id="player-status" class="text-success">Đang chờ...</span></div>
            </div>
            
            <!-- AI Info -->
            <div class="text-center player-info">
                <img src="https://img.icons8.com/ios-filled/50/000000/robot-2.png" alt="avatar-ai" style="width:60px;height:60px; margin-bottom:10px;" />
                <h5>Máy (AI)</h5>
                <div>Lượt đi: <span class="badge bg-primary text-light">O</span></div>
                <div class="mt-3">Trạng thái: <span id="ai-status" class="text-secondary">Đang chờ...</span></div>
            </div>
            
            <!-- AI Level Control -->
            <div class="text-center player-info">
                <h6 class="mb-3"><i class="fas fa-robot me-2"></i>Độ khó AI</h6>
                <div class="d-grid gap-2">
                    <button class="btn btn-primary btn-sm ai-level-btn" data-level="medium" onclick="setAILevel('medium')">
                        <i class="fas fa-user me-1"></i>Trung bình
                    </button>
                    <button class="btn btn-outline-primary btn-sm ai-level-btn" data-level="hard" onclick="setAILevel('hard')">
                        <i class="fas fa-crown me-1"></i>Khó
                    </button>
                </div>
            </div>
            
            <!-- Game Control -->
            <div class="text-center player-info">
                <h6 class="mb-3"><i class="fas fa-gamepad me-2"></i>Điều khiển</h6>
                <div class="d-grid gap-2">
                    <button class="btn btn-success btn-sm" onclick="resetGame()">
                        <i class="fas fa-redo me-1"></i>Chơi lại
                    </button>
                    <button class="btn btn-info btn-sm" onclick="showGameRules()">
                        <i class="fas fa-question-circle me-1"></i>Luật chơi
                    </button>
                    <button class="btn btn-warning btn-sm" onclick="testAI()">
                        <i class="fas fa-robot me-1"></i>Test AI
                    </button>
                    <button class="btn btn-danger btn-sm" onclick="forceAIMove()">
                        <i class="fas fa-bolt me-1"></i>Force AI
                    </button>
                </div>
            </div>
            
            <!-- Game Statistics -->
            <div class="text-center player-info">
                <h6 class="mb-3"><i class="fas fa-chart-bar me-2"></i>Thống kê</h6>
                <div class="row text-center">
                    <div class="col-4">
                        <div class="stat-item">
                            <div class="stat-number text-success" id="wins">0</div>
                            <div class="stat-label">Thắng</div>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="stat-item">
                            <div class="stat-number text-danger" id="losses">0</div>
                            <div class="stat-label">Thua</div>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="stat-item">
                            <div class="stat-number text-warning" id="draws">0</div>
                            <div class="stat-label">Hòa</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
}
else
{
    <!-- Hero Section -->
    <div class="hero-section text-center py-5">
        <div class="hero-icon mb-4">
            <i class="fas fa-chess-board fa-4x" style="color: #d4a24c;"></i>
        </div>
        <h1 class="hero-title mb-3">Chào mừng đến với <span class="text-primary">Web Cờ Caro</span></h1>
        <p class="hero-subtitle mb-4">Trải nghiệm game cờ caro trực tuyến với nhiều chế độ chơi thú vị</p>
        <div class="hero-buttons">
            <a href="/Account/Login" class="btn btn-primary btn-lg me-3">
                <i class="fas fa-sign-in-alt me-2"></i>Đăng nhập
            </a>
            <a href="/Account/Register" class="btn btn-outline-primary btn-lg">
                <i class="fas fa-user-plus me-2"></i>Đăng ký
            </a>
        </div>
    </div>

    <!-- Features Section -->
    <div class="features-section py-5">
        <div class="row g-4">
            <div class="col-md-4">
                <div class="feature-card text-center p-4 h-100">
                    <div class="feature-icon mb-3">
                        <i class="fas fa-users fa-3x" style="color: #28a745;"></i>
                    </div>
                    <h4>Chơi với Người</h4>
                    <p>Thách đấu bạn bè và người chơi khác trên toàn thế giới. Tạo phòng riêng hoặc tham gia phòng công khai.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card text-center p-4 h-100">
                    <div class="feature-icon mb-3">
                        <i class="fas fa-robot fa-3x" style="color: #007bff;"></i>
                    </div>
                    <h4>Chơi với AI</h4>
                    <p>Đối đầu với trí tuệ nhân tạo thông minh. Nhiều cấp độ từ dễ đến khó, phù hợp với mọi trình độ.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card text-center p-4 h-100">
                    <div class="feature-icon mb-3">
                        <i class="fas fa-trophy fa-3x" style="color: #ffc107;"></i>
                    </div>
                    <h4>Bảng Xếp Hạng</h4>
                    <p>Tham gia cạnh tranh và xem thứ hạng của mình. Theo dõi tiến độ và thành tích qua thời gian.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Modes Section -->
    <div class="game-modes-section py-5">
        <h2 class="text-center mb-5">Các Chế Độ Chơi</h2>
        <div class="row g-4">
            <div class="col-lg-6">
                <div class="mode-card d-flex align-items-center p-4">
                    <div class="mode-icon me-4">
                        <i class="fas fa-user-friends fa-2x" style="color: #28a745;"></i>
                    </div>
                    <div class="mode-content">
                        <h4>Chế Độ 2 Người</h4>
                        <p>Chơi cùng bạn bè trên cùng một thiết bị. Luân phiên đặt quân cờ và tận hưởng trò chơi truyền thống.</p>
                        <span class="badge bg-success">Có sẵn</span>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="mode-card d-flex align-items-center p-4">
                    <div class="mode-icon me-4">
                        <i class="fas fa-globe fa-2x" style="color: #007bff;"></i>
                    </div>
                    <div class="mode-content">
                        <h4>Chơi Trực Tuyến</h4>
                        <p>Kết nối với người chơi khác qua internet. Tạo phòng riêng hoặc tham gia phòng công khai.</p>
                        <span class="badge bg-primary">Sắp ra mắt</span>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="mode-card d-flex align-items-center p-4">
                    <div class="mode-icon me-4">
                        <i class="fas fa-brain fa-2x" style="color: #6f42c1;"></i>
                    </div>
                    <div class="mode-content">
                        <h4>Chế Độ AI</h4>
                        <p>Đối đầu với AI thông minh với 3 cấp độ: Dễ, Trung bình, Khó. Rèn luyện kỹ năng và chiến thuật.</p>
                        <span class="badge bg-success">Có sẵn</span>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="mode-card d-flex align-items-center p-4">
                    <div class="mode-icon me-4">
                        <i class="fas fa-clock fa-2x" style="color: #fd7e14;"></i>
                    </div>
                    <div class="mode-content">
                        <h4>Chế Độ Giới Hạn Thời Gian</h4>
                        <p>Thêm thử thách với giới hạn thời gian cho mỗi lượt đi. Tăng tốc độ tư duy và quyết định.</p>
                        <span class="badge bg-warning">Sắp ra mắt</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Why Choose Us Section -->
    <div class="why-choose-section py-5">
        <h2 class="text-center mb-5">Tại Sao Chọn Web Cờ Caro?</h2>
        <div class="row g-4">
            <div class="col-md-3">
                <div class="benefit-item text-center">
                    <i class="fas fa-mobile-alt fa-2x mb-3" style="color: #28a745;"></i>
                    <h5>Responsive Design</h5>
                    <p>Chơi mượt mà trên mọi thiết bị</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="benefit-item text-center">
                    <i class="fas fa-shield-alt fa-2x mb-3" style="color: #007bff;"></i>
                    <h5>Bảo Mật Cao</h5>
                    <p>Thông tin cá nhân được bảo vệ</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="benefit-item text-center">
                    <i class="fas fa-bolt fa-2x mb-3" style="color: #ffc107;"></i>
                    <h5>Tốc Độ Nhanh</h5>
                    <p>Phản hồi nhanh, không lag</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="benefit-item text-center">
                    <i class="fas fa-heart fa-2x mb-3" style="color: #dc3545;"></i>
                    <h5>Miễn Phí</h5>
                    <p>Hoàn toàn miễn phí, không quảng cáo</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Call to Action -->
    <div class="cta-section text-center py-5">
        <h3 class="mb-3">Sẵn sàng tham gia?</h3>
        <p class="mb-4">Đăng ký ngay để bắt đầu hành trình chinh phục cờ caro!</p>
        <a href="/Account/Register" class="btn btn-primary btn-lg">
            <i class="fas fa-rocket me-2"></i>Bắt Đầu Ngay
        </a>
    </div>
}

<style>
    .hero-section {
        background: linear-gradient(135deg, rgba(212, 162, 76, 0.1) 0%, rgba(230, 192, 123, 0.1) 100%);
        border-radius: 20px;
        margin-bottom: 40px;
    }

    .hero-title {
        font-size: 3rem;
        font-weight: bold;
        color: #2c3e50;
    }

    .hero-subtitle {
        font-size: 1.2rem;
        color: #7f8c8d;
    }

    .feature-card {
        background: #fff;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .mode-card {
        background: #fff;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        transition: transform 0.3s ease;
    }

    .mode-card:hover {
        transform: translateY(-3px);
    }

    .benefit-item {
        padding: 20px;
    }

    .benefit-item i {
        color: #d4a24c;
    }

    .cta-section {
        background: linear-gradient(135deg, #d4a24c 0%, #e6c07b 100%);
        border-radius: 20px;
        color: white;
    }

    .btn-primary {
        background: #d4a24c;
        border-color: #d4a24c;
    }

    .btn-primary:hover {
        background: #c19b4a;
        border-color: #c19b4a;
    }

    .btn-outline-primary {
        color: #d4a24c;
        border-color: #d4a24c;
    }

    .btn-outline-primary:hover {
        background: #d4a24c;
        border-color: #d4a24c;
    }
    
    /* Game UI Styles */
    .stat-item {
        padding: 10px;
    }
    
    .stat-number {
        font-size: 1.5rem;
        font-weight: bold;
    }
    
    .stat-label {
        font-size: 0.8rem;
        color: #6c757d;
    }
    
    .ai-level-btn {
        transition: all 0.3s ease;
    }
    
    .ai-level-btn:hover {
        transform: translateY(-2px);
    }
    
    .player-info {
        background: #fffbe6;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        padding: 20px;
        margin-bottom: 15px;
    }
    
    .player-info h6 {
        color: #d4a24c;
        font-weight: bold;
    }
    
    .btn-sm {
        font-size: 0.8rem;
        padding: 0.375rem 0.75rem;
    }
</style>

@section Scripts {
    <!-- Scripts are loaded in _Layout.cshtml -->
}
