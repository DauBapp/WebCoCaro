var t,e;t=self,e=()=>(()=>{var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"t",{value:!0})};var e,s={};t.r(s),t.d(s,{AbortError:()=>r,DefaultHttpClient:()=>H,HttpClient:()=>d,HttpError:()=>i,HttpResponse:()=>u,HttpTransportType:()=>F,HubConnection:()=>q,HubConnectionBuilder:()=>tt,HubConnectionState:()=>A,JsonHubProtocol:()=>Y,LogLevel:()=>e,MessageType:()=>x,NullLogger:()=>f,Subject:()=>U,TimeoutError:()=>n,TransferFormat:()=>B,VERSION:()=>p});class i extends Error{constructor(t,e){const s=new.target.prototype;super(`${t}: Status code '${e}'`),this.statusCode=e,this.name=s.constructor.name,Object.setPrototypeOf(this,s)}}class r extends Error{constructor(t="The operation was aborted."){const e=new.target.prototype;super(t),this.name=e.constructor.name,Object.setPrototypeOf(this,e)}}class n extends Error{constructor(t="The operation timed out."){const e=new.target.prototype;super(t),this.name=e.constructor.name,Object.setPrototypeOf(this,e)}}var o=function(){function t(){this._listeners=new Map}return t.prototype.on=function(t,e){this._listeners.has(t)||this._listeners.set(t,[]),this._listeners.get(t).push(e)},t.prototype.off=function(t,e){if(this._listeners.has(t)){const s=this._listeners.get(t),i=s.indexOf(e);i>=0&&s.splice(i,1)}},t.prototype.emit=function(t,...e){this._listeners.has(t)&&this._listeners.get(t).forEach(t=>t(...e))},t}();var a=function(){function t(){this._listeners=new Map}return t.prototype.on=function(t,e){this._listeners.has(t)||this._listeners.set(t,[]),this._listeners.get(t).push(e)},t.prototype.off=function(t,e){if(this._listeners.has(t)){const s=this._listeners.get(t),i=s.indexOf(e);i>=0&&s.splice(i,1)}},t.prototype.emit=function(t,...e){this._listeners.has(t)&&this._listeners.get(t).forEach(t=>t(...e))},t}();var l=function(){function t(){this._listeners=new Map}return t.prototype.on=function(t,e){this._listeners.has(t)||this._listeners.set(t,[]),this._listeners.get(t).push(e)},t.prototype.off=function(t,e){if(this._listeners.has(t)){const s=this._listeners.get(t),i=s.indexOf(e);i>=0&&s.splice(i,1)}},t.prototype.emit=function(t,...e){this._listeners.has(t)&&this._listeners.get(t).forEach(t=>t(...e))},t}();var c=function(){function t(){this._listeners=new Map}return t.prototype.on=function(t,e){this._listeners.has(t)||this._listeners.set(t,[]),this._listeners.get(t).push(e)},t.prototype.off=function(t,e){if(this._listeners.has(t)){const s=this._listeners.get(t),i=s.indexOf(e);i>=0&&s.splice(i,1)}},t.prototype.emit=function(t,...e){this._listeners.has(t)&&this._listeners.get(t).forEach(t=>t(...e))},t}();var h=function(){function t(){this._listeners=new Map}return t.prototype.on=function(t,e){this._listeners.has(t)||this._listeners.set(t,[]),this._listeners.get(t).push(e)},t.prototype.off=function(t,e){if(this._listeners.has(t)){const s=this._listeners.get(t),i=s.indexOf(e);i>=0&&s.splice(i,1)}},t.prototype.emit=function(t,...e){this._listeners.has(t)&&this._listeners.get(t).forEach(t=>t(...e))},t}();var u=function(){function t(t,e,s,i){this.statusCode=t,this.statusText=e,this.content=s,this.headers=i}return t}();var d=function(){function t(t){this.httpClient=t}return t.prototype.send=function(t){return this.httpClient.send(t)},t}();var H=function(){function t(){this.sentHeaders=new Map}return t.prototype.send=function(t){return new Promise((e,s)=>{const i=new XMLHttpRequest;for(const[e,n]of this.sentHeaders)i.setRequestHeader(e,n);i.onload=()=>{if(i.status>=200&&i.status<300){const t=i.responseText;let e;try{e=JSON.parse(t)}catch(t){e=t}e(i.status,i.statusText,e,i.getAllResponseHeaders())}else s(new i(i.statusText,i.status))},i.onerror=()=>{s(new i("Network error",0))},i.ontimeout=()=>{s(new n)},i.open(t.method,t.url,!0),t.content&&i.setRequestHeader("Content-Type","application/json"),i.send(t.content)})},t}();var F;!function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.LongPolling=2]="LongPolling",t[t.ServerSentEvents=4]="ServerSentEvents"}||(F={}),function(t){t[t.Text="Text",t[t.Binary="Binary"]="Binary"}(B||(B={})),function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close"}(x||(x={})),function(t){t[t.Critical=0]="Critical",t[t.Error=1]="Error",t[t.Warning=2]="Warning",t[t.Information=3]="Information",t[t.Debug=4]="Debug",t[t.Trace=5]="Trace"}(e||(e={}));var f=function(){function t(){}return t.prototype.log=function(t,e,s){},"function"==typeof console&&console.log&&(t.prototype.log=function(t,e,s){console.log(`[${e}] ${s}`)}),t}();var g=function(){function t(t,e,s){this.logger=t,this.transport=e,this.protocol=s,this.connectionState=0,this.connectionId=null,this.baseUrl=t.url,this.connectionToken=null,this.connectionTokenResponseMessage=null,this.groupsToken=null,this.serverTimeout=null,this.keepAliveInterval=null,this.reconnectDelay=0,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this.reconnectWindowInMilliseconds=5e3,this.negotiateVersion=0,this.negotiateVersionFallback=1,this.negotiateVersionFallbackLimit=2,this.connectionStarted=false,this.connectionStart=null,this.connectionStartTime=null,this.lastMessageReceivedTime=null,this.lastMessageSentTime=null,this.serverTimeoutHandle=null,this.keepAliveHandle=null,this.reconnectHandle=null,this.stopCalled=false,this.connectionDead=false,this.connectionKey=null,this.connectionFeatures=null,this.connectionTokenResponseMessage=null,this.connectionToken=null,this.groupsToken=null,this.serverTimeout=null,this.keepAliveInterval=null,this.reconnectDelay=0,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this.reconnectWindowInMilliseconds=5e3,this.negotiateVersion=0,this.negotiateVersionFallback=1,this.negotiateVersionFallbackLimit=2,this.connectionStarted=false,this.connectionStart=null,this.connectionStartTime=null,this.lastMessageReceivedTime=null,this.lastMessageSentTime=null,this.serverTimeoutHandle=null,this.keepAliveHandle=null,this.reconnectHandle=null,this.stopCalled=false,this.connectionDead=false,this.connectionKey=null,this.connectionFeatures=null}return t.prototype.start=function(){return this.startInternal()},t.prototype.startInternal=function(){return this.connectionStarted?Promise.resolve():this.negotiate(this.baseUrl).then(t=>{this.connectionTokenResponseMessage=t,this.connectionToken=t.connectionToken,this.connectionId=t.connectionId,this.negotiateVersion=t.version,this.connectionKey=t.connectionKey,this.connectionFeatures=t.availableTransports,this.serverTimeout=t.serverTimeout,this.keepAliveInterval=t.keepAliveInterval,this.groupsToken=t.groupsToken,this.connectionStartTime=Date.now(),this.connectionStart=this.transport.start(this.baseUrl,this.connectionToken,this.connectionId,this.connectionKey,this.connectionFeatures,this.serverTimeout,this.keepAliveInterval,this.groupsToken,this.protocol,this.logger),this.connectionStarted=!0,this.connectionStart.then(()=>{this.lastMessageReceivedTime=Date.now(),this.lastMessageSentTime=Date.now(),this.startServerTimeout(),this.startKeepAlive()}).catch(t=>{this.connectionStarted=!1,this.connectionStart=null,this.connectionStartTime=null,this.connectionToken=null,this.connectionId=null,this.connectionKey=null,this.connectionFeatures=null,this.serverTimeout=null,this.keepAliveInterval=null,this.groupsToken=null,this.reconnectDelay=0,this.reconnectAttempts=0,this.negotiateVersion=0,this.connectionDead=!0,this.logger.log(e.Error,"Failed to start connection: "+t),this.stop()})})},t.prototype.stop=function(){this.stopCalled=!0,this.stopInternal()},t.prototype.stopInternal=function(){this.stopCalled=!0,this.connectionStarted=!1,this.connectionStart=null,this.connectionStartTime=null,this.connectionToken=null,this.connectionId=null,this.connectionKey=null,this.connectionFeatures=null,this.serverTimeout=null,this.keepAliveInterval=null,this.groupsToken=null,this.reconnectDelay=0,this.reconnectAttempts=0,this.negotiateVersion=0,this.connectionDead=!0,this.stopServerTimeout(),this.stopKeepAlive(),this.stopReconnect(),this.transport.stop()},t.prototype.negotiate=function(t){return this.httpClient.post(t+"/negotiate",{version:this.negotiateVersion}).then(t=>{const e=t.content;return{connectionId:e.connectionId,connectionToken:e.connectionToken,connectionKey:e.connectionKey,availableTransports:e.availableTransports,serverTimeout:e.serverTimeout,keepAliveInterval:e.keepAliveInterval,groupsToken:e.groupsToken,version:e.version}}).catch(t=>{if(this.negotiateVersion<this.negotiateVersionFallbackLimit){this.negotiateVersion++;return this.negotiate(t)}throw t})},t.prototype.startServerTimeout=function(){this.serverTimeoutHandle=setTimeout(()=>{this.logger.log(e.Warning,"Server timeout elapsed without receiving a message from the server."),this.stop()},this.serverTimeoutInMilliseconds)},t.prototype.stopServerTimeout=function(){this.serverTimeoutHandle&&(clearTimeout(this.serverTimeoutHandle),this.serverTimeoutHandle=null)},t.prototype.startKeepAlive=function(){this.keepAliveHandle=setInterval(()=>{this.transport.send({type:x.Ping}),this.lastMessageSentTime=Date.now()},this.keepAliveIntervalInMilliseconds)},t.prototype.stopKeepAlive=function(){this.keepAliveHandle&&(clearInterval(this.keepAliveHandle),this.keepAliveHandle=null)},t.prototype.stopReconnect=function(){this.reconnectHandle&&(clearTimeout(this.reconnectHandle),this.reconnectHandle=null)},t.prototype.onreceive=function(t){this.lastMessageReceivedTime=Date.now(),this.stopServerTimeout(),this.startServerTimeout()},t.prototype.send=function(t){this.transport.send(t),this.lastMessageSentTime=Date.now()},t}();var q=function(){function t(t,e,s){this.connection=t,this.logger=e,this.protocol=s,this.methods=new Map,this.callbacks=new Map,this.id=0}return t.prototype.on=function(t,e){this.methods.set(t,e)},t.prototype.invoke=function(t,...e){return this.connection.send({type:x.Invocation,target:t,arguments:e,invocationId:this.id.toString()}),this.id++},t.prototype.stream=function(t,...e){const s=this.id.toString();this.connection.send({type:x.StreamInvocation,target:t,arguments:e,invocationId:s}),this.id++;const i=new U;return this.callbacks.set(s,i),i},t.prototype.send=function(t,...e){this.connection.send({type:x.Invocation,target:t,arguments:e})},t.prototype.off=function(t){this.methods.delete(t)},t.prototype.stop=function(){this.connection.stop()},t}();var tt=function(){function t(){this.url=null,this.logger=new f,this.httpClient=new H,this.transport=null,this.protocol=new Y(this.logger)}return t.prototype.withUrl=function(t,e){return this.url=t,this.options=e,this},t.prototype.withHubProtocol=function(t){return this.protocol=t,this},t.prototype.withTransport=function(t){return this.transport=t,this},t.prototype.configureLogging=function(t){return this.logger=t,this},t.prototype.build=function(){if(!this.url)throw new Error("A URL must be specified.");if(!this.transport)throw new Error("A transport must be specified.");const t=new g(this.logger,this.transport,this.protocol);return new q(t,this.logger,this.protocol)},t}();var A;!function(t){t[t.Disconnected=0]="Disconnected",t[t.Connected=1]="Connected",t[t.Connecting=2]="Connecting",t[t.Reconnecting=3]="Reconnecting",t[t.Disconnecting=4]="Disconnecting"}(A||(A={}));var Y=function(){function t(t){this.logger=t}return t.prototype.name="json",t.prototype.version=1,t.prototype.transferFormat=B.Text,t.prototype.parseMessages=function(t){try{const e=JSON.parse(t);return Array.isArray(e)?e:[e]}catch(t){this.logger.log(e.Error,"Error parsing JSON: "+t),throw t}},t.prototype.writeMessage=function(t){return JSON.stringify(t)},t}();var U=function(){function t(){this.observers=[]}return t.prototype.next=function(t){this.observers.forEach(t=>t(t))},t.prototype.error=function(t){this.observers.forEach(t=>t.error(t))},t.prototype.complete=function(){this.observers.forEach(t=>t.complete())},t.prototype.subscribe=function(t){return this.observers.push(t),{dispose:()=>{const e=this.observers.indexOf(t);e>-1&&this.observers.splice(e,1)}}},t}();var p="6.0.27";e()})(); 